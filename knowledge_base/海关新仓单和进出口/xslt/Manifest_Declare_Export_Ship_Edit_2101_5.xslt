<?xml version="1.0" encoding="UTF-8"?>
<!--
This file was generated by Altova MapForce 2011r2sp1

YOU SHOULD NOT MODIFY THIS FILE, BECAUSE IT WILL BE
OVERWRITTEN WHEN YOU RE-RUN CODE GENERATION.

Refer to the Altova MapForce Documentation for further details.
http://www.altova.com/mapforce
-->
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:ns0="urn:Declaration:datamodel:standard:CN:MT2101:1" exclude-result-prefixes="xs ns0">
	<xsl:output method="xml" encoding="UTF-8" indent="yes"/>
	<xsl:template match="/">
		<Manifest>
			<xsl:for-each select="ns0:Manifest">
				<xsl:variable name="var1_Declaration" select="ns0:Declaration"/>
				<xsl:variable name="var2_Head" select="ns0:Head"/>
				<xsl:variable name="var3_BorderTransportMeans" select="$var1_Declaration/ns0:BorderTransportMeans"/>
				<xsl:variable name="var4_resultof_cast" select="string($var2_Head/ns0:MessageType)"/>
				<xsl:variable name="var5_resultof_substring" select="substring($var4_resultof_cast, number('4'), number('1'))"/>
				<xsl:variable name="var6_JourneyID" select="$var3_BorderTransportMeans/ns0:JourneyID"/>
				<xsl:variable name="var7_resultof_equal" select="($var4_resultof_cast = 'MT1101')"/>
				<xsl:variable name="var8_resultof_cast" select="string($var2_Head/ns0:ReceiverID)"/>
				<xsl:variable name="var9_resultof_cast" select="string($var2_Head/ns0:SenderID)"/>
				<xsl:variable name="var10_resultof_cast" select="string($var6_JourneyID)"/>
				<xsl:variable name="var11_resultof_cast" select="string($var3_BorderTransportMeans/ns0:ID)"/>
				<xsl:variable name="var12_val">
					<xsl:choose>
						<xsl:when test="string(($var5_resultof_substring = '1')) != 'false'">
							<xsl:value-of select="'2'"/>
						</xsl:when>
						<xsl:when test="string(($var5_resultof_substring = '2')) != 'false'">
							<xsl:value-of select="'5'"/>
						</xsl:when>
						<xsl:otherwise>
							<xsl:value-of select="'2'"/>
						</xsl:otherwise>
					</xsl:choose>
				</xsl:variable>
				<xsl:variable name="var13_val" select="string($var12_val)"/>
				<xsl:variable name="var14_val" select="((string($var7_resultof_equal) != 'false') or (($var4_resultof_cast = 'MT1201') or (($var4_resultof_cast = 'MT2101') or (($var4_resultof_cast = 'MT2201') or (($var4_resultof_cast = 'MT3101') or (($var4_resultof_cast = 'MT3102') or (($var4_resultof_cast = 'MT3201') or (($var4_resultof_cast = 'MT3202') or (($var4_resultof_cast = 'MT4101') or (($var4_resultof_cast = 'MT4201') or (($var4_resultof_cast = 'MT5101') or (($var4_resultof_cast = 'MT5102') or (($var4_resultof_cast = 'MT5201') or (($var4_resultof_cast = 'MT5202') or (($var4_resultof_cast = 'MT6101') or (($var4_resultof_cast = 'MT6102') or (($var4_resultof_cast = 'MT6201') or (($var4_resultof_cast = 'MT6202') or (($var4_resultof_cast = 'MT7101') or (($var4_resultof_cast = 'MT8101') or (($var4_resultof_cast = 'MT8102') or (($var4_resultof_cast = 'MT8103') or (($var4_resultof_cast = 'MT8104') or (($var4_resultof_cast = 'MT8201') or (($var4_resultof_cast = 'MT8202') or (($var4_resultof_cast = 'MT8203') or (($var4_resultof_cast = 'MT8204') or (($var4_resultof_cast = 'MTECEX') or ($var4_resultof_cast = 'MTECIM')))))))))))))))))))))))))))))"/>
				<msg_info>
					<msg_id>
						<xsl:value-of select="string($var2_Head/ns0:MessageID)"/>
					</msg_id>
					<function_code>
						<xsl:value-of select="string($var2_Head/ns0:FunctionCode)"/>
					</function_code>
					<msg_type>
						<xsl:value-of select="substring-after($var4_resultof_cast, 'MT')"/>
					</msg_type>
					<sender_id>
						<xsl:value-of select="$var9_resultof_cast"/>
					</sender_id>
					<receiver_id>
						<xsl:value-of select="$var8_resultof_cast"/>
					</receiver_id>
					<send_time>
						<xsl:value-of select="string($var2_Head/ns0:SendTime)"/>
					</send_time>
					<version>
						<xsl:value-of select="string($var2_Head/ns0:Version)"/>
					</version>
				</msg_info>
				<content>
					<transport>
						<manifest_id>
							<xsl:choose>
								<xsl:when test="string((string($var12_val) = '2')) != 'false'">
									<xsl:value-of select="concat(concat($var11_resultof_cast, '_'), $var10_resultof_cast)"/>
								</xsl:when>
								<xsl:otherwise>
									<xsl:value-of select="string($var6_JourneyID)"/>
								</xsl:otherwise>
							</xsl:choose>
						</manifest_id>
						<decl_traf_mode>
							<xsl:value-of select="$var13_val"/>
						</decl_traf_mode>
						<xsl:if test="string((string($var14_val) != 'false')) != 'false'">
							<i_e_flag>
								<xsl:choose>
									<xsl:when test="string((string($var7_resultof_equal) != 'false')) != 'false'">
										<xsl:value-of select="'I'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT1201')) != 'false'">
										<xsl:value-of select="'I'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT2101')) != 'false'">
										<xsl:value-of select="'E'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT2201')) != 'false'">
										<xsl:value-of select="'E'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT3101')) != 'false'">
										<xsl:value-of select="'E'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT3102')) != 'false'">
										<xsl:value-of select="'I'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT3201')) != 'false'">
										<xsl:value-of select="'E'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT3202')) != 'false'">
										<xsl:value-of select="'I'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT4101')) != 'false'">
										<xsl:value-of select="'E'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT4201')) != 'false'">
										<xsl:value-of select="'E'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT5101')) != 'false'">
										<xsl:value-of select="'I'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT5102')) != 'false'">
										<xsl:value-of select="'E'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT5201')) != 'false'">
										<xsl:value-of select="'I'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT5202')) != 'false'">
										<xsl:value-of select="'E'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT6101')) != 'false'">
										<xsl:value-of select="'I'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT6102')) != 'false'">
										<xsl:value-of select="'I'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT6201')) != 'false'">
										<xsl:value-of select="'I'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT6202')) != 'false'">
										<xsl:value-of select="'I'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT7101')) != 'false'">
										<xsl:value-of select="'E'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT8101')) != 'false'">
										<xsl:value-of select="'I'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT8102')) != 'false'">
										<xsl:value-of select="'E'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT8103')) != 'false'">
										<xsl:value-of select="'E'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT8104')) != 'false'">
										<xsl:value-of select="'E'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT8201')) != 'false'">
										<xsl:value-of select="'I'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT8202')) != 'false'">
										<xsl:value-of select="'E'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT8203')) != 'false'">
										<xsl:value-of select="'E'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MT8204')) != 'false'">
										<xsl:value-of select="'E'"/>
									</xsl:when>
									<xsl:when test="string(($var4_resultof_cast = 'MTECEX')) != 'false'">
										<xsl:value-of select="'E'"/>
									</xsl:when>
									<xsl:otherwise>
										<xsl:if test="string(($var4_resultof_cast = 'MTECIM')) != 'false'">
											<xsl:value-of select="'I'"/>
										</xsl:if>
									</xsl:otherwise>
								</xsl:choose>
							</i_e_flag>
						</xsl:if>
						<voyage_no>
							<xsl:value-of select="$var10_resultof_cast"/>
						</voyage_no>
						<transport_id>
							<xsl:value-of select="$var11_resultof_cast"/>
						</transport_id>
						<xsl:for-each select="$var3_BorderTransportMeans/ns0:FirstArrivalLocationID">
							<first_port_id>
								<xsl:value-of select="string(.)"/>
							</first_port_id>
						</xsl:for-each>
						<xsl:for-each select="$var3_BorderTransportMeans/ns0:ArrivalDateTime">
							<xsl:variable name="var15_resultof_cast" select="string(.)"/>
							<xsl:variable name="var16_result">
								<xsl:choose>
									<xsl:when test="string(('15' = string-length($var15_resultof_cast))) != 'false'">
										<xsl:value-of select="substring($var15_resultof_cast, '1', '12')"/>
									</xsl:when>
									<xsl:otherwise>
										<xsl:value-of select="$var15_resultof_cast"/>
									</xsl:otherwise>
								</xsl:choose>
							</xsl:variable>
							<xsl:variable name="var17_resultof_substring" select="substring(concat($var16_result, '000000000'), '1', '14')"/>
							<first_port_date>
								<xsl:value-of select="concat(concat(concat(concat(concat(concat(concat(concat(concat(concat(substring(string($var17_resultof_substring), '1', '4'), '-'), substring(string($var17_resultof_substring), '5', '2')), '-'), substring(string($var17_resultof_substring), '7', '2')), 'T'), substring(string($var17_resultof_substring), '9', '2')), ':'), substring(string($var17_resultof_substring), '11', '2')), ':'), substring(string($var17_resultof_substring), '13', '2'))"/>
							</first_port_date>
						</xsl:for-each>
						<xsl:for-each select="$var1_Declaration/ns0:AdditionalInformation">
							<remark>
								<xsl:value-of select="string(ns0:Content)"/>
							</remark>
						</xsl:for-each>
					</transport>
					<bills>
						<xsl:for-each select="$var1_Declaration/ns0:Consignment">
							<xsl:variable name="var18_GrossVolumeMeasure" select="ns0:GrossVolumeMeasure"/>
							<xsl:variable name="var19_PreviousCustomsDocument" select="ns0:PreviousCustomsDocument"/>
							<xsl:variable name="var20_ConsignmentPackaging" select="ns0:ConsignmentPackaging"/>
							<xsl:variable name="var21_AssociatedTransportDocument" select="ns0:AssociatedTransportDocument"/>
							<xsl:variable name="var22_ValueAmount" select="ns0:ValueAmount"/>
							<xsl:variable name="var23_CustomsStatusCode" select="ns0:CustomsStatusCode"/>
							<xsl:variable name="var24_GoodsReceiptPlace" select="ns0:GoodsReceiptPlace"/>
							<xsl:variable name="var25_UnloadingLocation" select="ns0:UnloadingLocation"/>
							<xsl:variable name="var26_RoutingCountryCode" select="ns0:RoutingCountryCode"/>
							<xsl:variable name="var27_TotalGrossMassMeasure" select="ns0:TotalGrossMassMeasure"/>
							<xsl:variable name="var28_resultof_exists" select="boolean($var21_AssociatedTransportDocument)"/>
							<xsl:variable name="var29_TransportContractDocument" select="ns0:TransportContractDocument"/>
							<bill>
								<manifest_id>
									<xsl:choose>
										<xsl:when test="string((string($var12_val) = '2')) != 'false'">
											<xsl:value-of select="concat(concat($var11_resultof_cast, '_'), $var10_resultof_cast)"/>
										</xsl:when>
										<xsl:otherwise>
											<xsl:value-of select="string($var6_JourneyID)"/>
										</xsl:otherwise>
									</xsl:choose>
								</manifest_id>
								<receiver_code>
									<xsl:value-of select="$var8_resultof_cast"/>
								</receiver_code>
								<sender_code>
									<xsl:value-of select="$var9_resultof_cast"/>
								</sender_code>
								<bill_no>
									<xsl:choose>
										<xsl:when test="string((string($var28_resultof_exists) != 'false')) != 'false'">
											<xsl:for-each select="$var21_AssociatedTransportDocument">
												<xsl:value-of select="string(ns0:ID)"/>
											</xsl:for-each>
										</xsl:when>
										<xsl:otherwise>
											<xsl:value-of select="string($var29_TransportContractDocument/ns0:ID)"/>
										</xsl:otherwise>
									</xsl:choose>
								</bill_no>
								<bill_type>
									<xsl:choose>
										<xsl:when test="string((string($var28_resultof_exists) != 'false')) != 'false'">
											<xsl:value-of select="'1'"/>
										</xsl:when>
										<xsl:otherwise>
											<xsl:value-of select="'0'"/>
										</xsl:otherwise>
									</xsl:choose>
								</bill_type>
								<xsl:if test="string((string($var28_resultof_exists) != 'false')) != 'false'">
									<parent_bill_no>
										<xsl:value-of select="string($var29_TransportContractDocument/ns0:ID)"/>
									</parent_bill_no>
								</xsl:if>
								<decl_traf_mode>
									<xsl:value-of select="$var13_val"/>
								</decl_traf_mode>
								<xsl:if test="string((string($var14_val) != 'false')) != 'false'">
									<i_e_flag>
										<xsl:choose>
											<xsl:when test="string((string($var7_resultof_equal) != 'false')) != 'false'">
												<xsl:value-of select="'I'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT1201')) != 'false'">
												<xsl:value-of select="'I'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT2101')) != 'false'">
												<xsl:value-of select="'E'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT2201')) != 'false'">
												<xsl:value-of select="'E'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT3101')) != 'false'">
												<xsl:value-of select="'E'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT3102')) != 'false'">
												<xsl:value-of select="'I'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT3201')) != 'false'">
												<xsl:value-of select="'E'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT3202')) != 'false'">
												<xsl:value-of select="'I'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT4101')) != 'false'">
												<xsl:value-of select="'E'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT4201')) != 'false'">
												<xsl:value-of select="'E'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT5101')) != 'false'">
												<xsl:value-of select="'I'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT5102')) != 'false'">
												<xsl:value-of select="'E'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT5201')) != 'false'">
												<xsl:value-of select="'I'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT5202')) != 'false'">
												<xsl:value-of select="'E'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT6101')) != 'false'">
												<xsl:value-of select="'I'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT6102')) != 'false'">
												<xsl:value-of select="'I'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT6201')) != 'false'">
												<xsl:value-of select="'I'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT6202')) != 'false'">
												<xsl:value-of select="'I'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT7101')) != 'false'">
												<xsl:value-of select="'E'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT8101')) != 'false'">
												<xsl:value-of select="'I'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT8102')) != 'false'">
												<xsl:value-of select="'E'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT8103')) != 'false'">
												<xsl:value-of select="'E'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT8104')) != 'false'">
												<xsl:value-of select="'E'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT8201')) != 'false'">
												<xsl:value-of select="'I'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT8202')) != 'false'">
												<xsl:value-of select="'E'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT8203')) != 'false'">
												<xsl:value-of select="'E'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MT8204')) != 'false'">
												<xsl:value-of select="'E'"/>
											</xsl:when>
											<xsl:when test="string(($var4_resultof_cast = 'MTECEX')) != 'false'">
												<xsl:value-of select="'E'"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:if test="string(($var4_resultof_cast = 'MTECIM')) != 'false'">
													<xsl:value-of select="'I'"/>
												</xsl:if>
											</xsl:otherwise>
										</xsl:choose>
									</i_e_flag>
								</xsl:if>
								<xsl:for-each select="$var18_GrossVolumeMeasure">
									<volume>
										<xsl:value-of select="string(number(string(.)))"/>
									</volume>
								</xsl:for-each>
								<xsl:if test="string(boolean($var18_GrossVolumeMeasure)) != 'false'">
									<volume_unit>
										<xsl:choose>
											<xsl:when test="string(('2' = string($var12_val))) != 'false'">
												<xsl:value-of select="'M3'"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:value-of select="'CM3'"/>
											</xsl:otherwise>
										</xsl:choose>
									</volume_unit>
								</xsl:if>
								<xsl:for-each select="$var22_ValueAmount">
									<goods_price>
										<xsl:value-of select="string(number(string(.)))"/>
									</goods_price>
								</xsl:for-each>
								<xsl:for-each select="$var22_ValueAmount">
									<curr_code>
										<xsl:value-of select="string(@CurrencyTypeCode)"/>
									</curr_code>
								</xsl:for-each>
								<xsl:for-each select="$var3_BorderTransportMeans/ns0:DepartureDateTime">
									<xsl:variable name="var30_resultof_cast" select="string(.)"/>
									<xsl:variable name="var31_result">
										<xsl:choose>
											<xsl:when test="string(('15' = string-length($var30_resultof_cast))) != 'false'">
												<xsl:value-of select="substring($var30_resultof_cast, '1', '12')"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:value-of select="$var30_resultof_cast"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var32_resultof_substring" select="substring(concat($var31_result, '000000000'), '1', '14')"/>
									<decl_transit_date>
										<xsl:value-of select="concat(concat(concat(concat(concat(concat(concat(concat(concat(concat(substring(string($var32_resultof_substring), '1', '4'), '-'), substring(string($var32_resultof_substring), '5', '2')), '-'), substring(string($var32_resultof_substring), '7', '2')), 'T'), substring(string($var32_resultof_substring), '9', '2')), ':'), substring(string($var32_resultof_substring), '11', '2')), ':'), substring(string($var32_resultof_substring), '13', '2'))"/>
									</decl_transit_date>
								</xsl:for-each>
								<decl_name>
									<xsl:value-of select="string($var1_Declaration/ns0:RepresentativePerson/ns0:Name)"/>
								</decl_name>
								<xsl:for-each select="$var25_UnloadingLocation/ns0:ID">
									<unload_code>
										<xsl:value-of select="string(.)"/>
									</unload_code>
								</xsl:for-each>
								<xsl:for-each select="$var25_UnloadingLocation/ns0:ArrivalDate">
									<xsl:variable name="var33_resultof_cast" select="string(.)"/>
									<xsl:variable name="var34_result">
										<xsl:choose>
											<xsl:when test="string(('15' = string-length($var33_resultof_cast))) != 'false'">
												<xsl:value-of select="substring($var33_resultof_cast, '1', '12')"/>
											</xsl:when>
											<xsl:otherwise>
												<xsl:value-of select="$var33_resultof_cast"/>
											</xsl:otherwise>
										</xsl:choose>
									</xsl:variable>
									<xsl:variable name="var35_resultof_substring" select="substring(concat($var34_result, '000000000'), '1', '14')"/>
									<unload_date>
										<xsl:value-of select="concat(concat(concat(concat(concat(concat(concat(concat(concat(concat(substring(string($var35_resultof_substring), '1', '4'), '-'), substring(string($var35_resultof_substring), '5', '2')), '-'), substring(string($var35_resultof_substring), '7', '2')), 'T'), substring(string($var35_resultof_substring), '9', '2')), ':'), substring(string($var35_resultof_substring), '11', '2')), ':'), substring(string($var35_resultof_substring), '13', '2'))"/>
									</unload_date>
								</xsl:for-each>
								<xsl:for-each select="$var24_GoodsReceiptPlace/ns0:ID">
									<owner_place_code>
										<xsl:value-of select="string(.)"/>
									</owner_place_code>
								</xsl:for-each>
								<xsl:for-each select="$var24_GoodsReceiptPlace/ns0:Name">
									<owner_place_name>
										<xsl:value-of select="string(.)"/>
									</owner_place_name>
								</xsl:for-each>
								<xsl:for-each select="ns0:TranshipmentLocation">
									<trn_place_code>
										<xsl:value-of select="string(ns0:ID)"/>
									</trn_place_code>
								</xsl:for-each>
								<xsl:for-each select="ns0:TransitDestination">
									<destination_code>
										<xsl:value-of select="string(ns0:ID)"/>
									</destination_code>
								</xsl:for-each>
								<xsl:choose>
									<xsl:when test="string(boolean($var26_RoutingCountryCode)) != 'false'">
										<xsl:for-each select="$var26_RoutingCountryCode[not((string(string-length(substring(concat(string(.), ';'), '1', (string-length(concat(string(.), ';')) - '1')))) = '0'))]">
											<pass_country_code>
												<xsl:value-of select="substring(concat(string(.), ';'), '1', (string-length(concat(string(.), ';')) - '1'))"/>
											</pass_country_code>
										</xsl:for-each>
									</xsl:when>
									<xsl:otherwise>
										<xsl:variable name="var36_resultof_first" select="';'"/>
										<xsl:variable name="var37_resultof_substring" select="substring($var36_resultof_first, '1', (string-length($var36_resultof_first) - '1'))"/>
										<xsl:if test="string(not((string(string-length($var37_resultof_substring)) = '0'))) != 'false'">
											<pass_country_code>
												<xsl:value-of select="$var37_resultof_substring"/>
											</pass_country_code>
										</xsl:if>
									</xsl:otherwise>
								</xsl:choose>
								<xsl:for-each select="$var29_TransportContractDocument/ns0:ChangeReasonCode">
									<xsl:variable name="var38_resultof_concat" select="concat(string(.), ';')"/>
									<xsl:variable name="var39_resultof_substring" select="substring($var38_resultof_concat, '1', (string-length($var38_resultof_concat) - '1'))"/>
									<xsl:if test="string(not((string(string-length($var39_resultof_substring)) = '0'))) != 'false'">
										<change_reason>
											<xsl:value-of select="$var39_resultof_substring"/>
										</change_reason>
									</xsl:if>
								</xsl:for-each>
								<xsl:for-each select="$var29_TransportContractDocument/ns0:ConditionCode">
									<fee_condition>
										<xsl:value-of select="string(.)"/>
									</fee_condition>
								</xsl:for-each>
								<xsl:for-each select="ns0:GoodsConsignedPlace">
									<consign_place_code>
										<xsl:value-of select="string(ns0:ID)"/>
									</consign_place_code>
								</xsl:for-each>
								<xsl:choose>
									<xsl:when test="string(boolean($var23_CustomsStatusCode)) != 'false'">
										<xsl:for-each select="$var23_CustomsStatusCode[not((string(string-length(substring(concat(string(.), ';'), '1', (string-length(concat(string(.), ';')) - '1')))) = '0'))]">
											<customs_state_code>
												<xsl:value-of select="substring(concat(string(.), ';'), '1', (string-length(concat(string(.), ';')) - '1'))"/>
											</customs_state_code>
										</xsl:for-each>
									</xsl:when>
									<xsl:otherwise>
										<xsl:variable name="var40_resultof_first" select="';'"/>
										<xsl:variable name="var41_resultof_substring" select="substring($var40_resultof_first, '1', (string-length($var40_resultof_first) - '1'))"/>
										<xsl:if test="string(not((string(string-length($var41_resultof_substring)) = '0'))) != 'false'">
											<customs_state_code>
												<xsl:value-of select="$var41_resultof_substring"/>
											</customs_state_code>
										</xsl:if>
									</xsl:otherwise>
								</xsl:choose>
								<xsl:for-each select="ns0:FreightPayment">
									<fee_code>
										<xsl:value-of select="string(ns0:MethodCode)"/>
									</fee_code>
								</xsl:for-each>
								<xsl:for-each select="$var20_ConsignmentPackaging/ns0:TypeCode">
									<wrap_type>
										<xsl:value-of select="string(.)"/>
									</wrap_type>
								</xsl:for-each>
								<xsl:for-each select="$var20_ConsignmentPackaging/ns0:QuantityQuantity">
									<pack_no>
										<xsl:value-of select="string(number(string(.)))"/>
									</pack_no>
								</xsl:for-each>
								<xsl:for-each select="$var27_TotalGrossMassMeasure">
									<gross_wt>
										<xsl:value-of select="string(number(string(.)))"/>
									</gross_wt>
								</xsl:for-each>
								<xsl:if test="string(boolean($var27_TotalGrossMassMeasure)) != 'false'">
									<weight_unit>KG</weight_unit>
								</xsl:if>
								<xsl:for-each select="$var19_PreviousCustomsDocument">
									<forward_form_id>
										<xsl:value-of select="string(ns0:ID)"/>
									</forward_form_id>
								</xsl:for-each>
								<xsl:for-each select="$var19_PreviousCustomsDocument">
									<forward_form_type>
										<xsl:value-of select="string(ns0:TypeCode)"/>
									</forward_form_type>
								</xsl:for-each>
								<xsl:for-each select="ns0:Handling">
									<dock_order_code>
										<xsl:value-of select="string(ns0:InstructionsCodeCode)"/>
									</dock_order_code>
								</xsl:for-each>
								<companys>
									<xsl:for-each select="$var29_TransportContractDocument/ns0:Consolidator">
										<xsl:variable name="var42_resultof_local_name" select="local-name(.)"/>
										<xsl:variable name="var43_resultof_equal" select="($var42_resultof_local_name = 'NotifyParty')"/>
										<company>
											<manifest_id>
												<xsl:choose>
													<xsl:when test="string((string($var12_val) = '2')) != 'false'">
														<xsl:value-of select="concat(concat($var11_resultof_cast, '_'), $var10_resultof_cast)"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="string($var6_JourneyID)"/>
													</xsl:otherwise>
												</xsl:choose>
											</manifest_id>
											<bill_no>
												<xsl:choose>
													<xsl:when test="string((string($var28_resultof_exists) != 'false')) != 'false'">
														<xsl:for-each select="$var21_AssociatedTransportDocument">
															<xsl:value-of select="string(ns0:ID)"/>
														</xsl:for-each>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="string($var29_TransportContractDocument/ns0:ID)"/>
													</xsl:otherwise>
												</xsl:choose>
											</bill_no>
											<bill_type>
												<xsl:choose>
													<xsl:when test="string((string($var28_resultof_exists) != 'false')) != 'false'">
														<xsl:value-of select="'1'"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="'0'"/>
													</xsl:otherwise>
												</xsl:choose>
											</bill_type>
											<xsl:if test="string((string($var28_resultof_exists) != 'false')) != 'false'">
												<parent_bill_no>
													<xsl:value-of select="string($var29_TransportContractDocument/ns0:ID)"/>
												</parent_bill_no>
											</xsl:if>
											<decl_traf_mode>
												<xsl:value-of select="$var13_val"/>
											</decl_traf_mode>
											<xsl:if test="string((string($var14_val) != 'false')) != 'false'">
												<i_e_flag>
													<xsl:choose>
														<xsl:when test="string((string($var7_resultof_equal) != 'false')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT1201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT2101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT2201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3102')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3202')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT4101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT4201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5102')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5202')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6102')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6202')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT7101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8102')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8103')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8104')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8202')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8203')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8204')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MTECEX')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:if test="string(($var4_resultof_cast = 'MTECIM')) != 'false'">
																<xsl:value-of select="'I'"/>
															</xsl:if>
														</xsl:otherwise>
													</xsl:choose>
												</i_e_flag>
											</xsl:if>
											<trade_co>
												<xsl:value-of select="string(ns0:ID)"/>
											</trade_co>
											<xsl:if test="string(((string($var43_resultof_equal) != 'false') or (($var42_resultof_local_name = 'Consignee') or (($var42_resultof_local_name = 'Consolidator') or (($var42_resultof_local_name = 'UNDGContact') or (($var42_resultof_local_name = 'Deconsolidator') or (($var42_resultof_local_name = 'DeliveryDestination') or (($var42_resultof_local_name = 'Consignor') or ($var42_resultof_local_name = 'IntermediateCarrier'))))))))) != 'false'">
												<trade_type>
													<xsl:choose>
														<xsl:when test="string((string($var43_resultof_equal) != 'false')) != 'false'">
															<xsl:value-of select="'notify'"/>
														</xsl:when>
														<xsl:when test="string(($var42_resultof_local_name = 'Consignee')) != 'false'">
															<xsl:value-of select="'consignee'"/>
														</xsl:when>
														<xsl:when test="string(($var42_resultof_local_name = 'Consolidator')) != 'false'">
															<xsl:value-of select="'operate_conta'"/>
														</xsl:when>
														<xsl:when test="string(($var42_resultof_local_name = 'UNDGContact')) != 'false'">
															<xsl:value-of select="'danger'"/>
														</xsl:when>
														<xsl:when test="string(($var42_resultof_local_name = 'Deconsolidator')) != 'false'">
															<xsl:value-of select="'operate_conta'"/>
														</xsl:when>
														<xsl:when test="string(($var42_resultof_local_name = 'DeliveryDestination')) != 'false'">
															<xsl:value-of select="'delivery'"/>
														</xsl:when>
														<xsl:when test="string(($var42_resultof_local_name = 'Consignor')) != 'false'">
															<xsl:value-of select="'consignor'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:if test="string(($var42_resultof_local_name = 'IntermediateCarrier')) != 'false'">
																<xsl:value-of select="'mid_transit'"/>
															</xsl:if>
														</xsl:otherwise>
													</xsl:choose>
												</trade_type>
											</xsl:if>
										</company>
									</xsl:for-each>
									<xsl:for-each select="ns0:DeliveryDestination">
										<xsl:variable name="var44_resultof_local_name" select="local-name(.)"/>
										<xsl:variable name="var45_resultof_equal" select="($var44_resultof_local_name = 'NotifyParty')"/>
										<company>
											<manifest_id>
												<xsl:choose>
													<xsl:when test="string((string($var12_val) = '2')) != 'false'">
														<xsl:value-of select="concat(concat($var11_resultof_cast, '_'), $var10_resultof_cast)"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="string($var6_JourneyID)"/>
													</xsl:otherwise>
												</xsl:choose>
											</manifest_id>
											<bill_no>
												<xsl:choose>
													<xsl:when test="string((string($var28_resultof_exists) != 'false')) != 'false'">
														<xsl:for-each select="$var21_AssociatedTransportDocument">
															<xsl:value-of select="string(ns0:ID)"/>
														</xsl:for-each>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="string($var29_TransportContractDocument/ns0:ID)"/>
													</xsl:otherwise>
												</xsl:choose>
											</bill_no>
											<bill_type>
												<xsl:choose>
													<xsl:when test="string((string($var28_resultof_exists) != 'false')) != 'false'">
														<xsl:value-of select="'1'"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="'0'"/>
													</xsl:otherwise>
												</xsl:choose>
											</bill_type>
											<xsl:if test="string((string($var28_resultof_exists) != 'false')) != 'false'">
												<parent_bill_no>
													<xsl:value-of select="string($var29_TransportContractDocument/ns0:ID)"/>
												</parent_bill_no>
											</xsl:if>
											<decl_traf_mode>
												<xsl:value-of select="$var13_val"/>
											</decl_traf_mode>
											<xsl:if test="string((string($var14_val) != 'false')) != 'false'">
												<i_e_flag>
													<xsl:choose>
														<xsl:when test="string((string($var7_resultof_equal) != 'false')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT1201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT2101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT2201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3102')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3202')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT4101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT4201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5102')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5202')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6102')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6202')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT7101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8102')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8103')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8104')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8202')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8203')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8204')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MTECEX')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:if test="string(($var4_resultof_cast = 'MTECIM')) != 'false'">
																<xsl:value-of select="'I'"/>
															</xsl:if>
														</xsl:otherwise>
													</xsl:choose>
												</i_e_flag>
											</xsl:if>
											<xsl:if test="string(((string($var45_resultof_equal) != 'false') or (($var44_resultof_local_name = 'Consignee') or (($var44_resultof_local_name = 'Consolidator') or (($var44_resultof_local_name = 'UNDGContact') or (($var44_resultof_local_name = 'Deconsolidator') or (($var44_resultof_local_name = 'DeliveryDestination') or (($var44_resultof_local_name = 'Consignor') or ($var44_resultof_local_name = 'IntermediateCarrier'))))))))) != 'false'">
												<trade_type>
													<xsl:choose>
														<xsl:when test="string((string($var45_resultof_equal) != 'false')) != 'false'">
															<xsl:value-of select="'notify'"/>
														</xsl:when>
														<xsl:when test="string(($var44_resultof_local_name = 'Consignee')) != 'false'">
															<xsl:value-of select="'consignee'"/>
														</xsl:when>
														<xsl:when test="string(($var44_resultof_local_name = 'Consolidator')) != 'false'">
															<xsl:value-of select="'operate_conta'"/>
														</xsl:when>
														<xsl:when test="string(($var44_resultof_local_name = 'UNDGContact')) != 'false'">
															<xsl:value-of select="'danger'"/>
														</xsl:when>
														<xsl:when test="string(($var44_resultof_local_name = 'Deconsolidator')) != 'false'">
															<xsl:value-of select="'operate_conta'"/>
														</xsl:when>
														<xsl:when test="string(($var44_resultof_local_name = 'DeliveryDestination')) != 'false'">
															<xsl:value-of select="'delivery'"/>
														</xsl:when>
														<xsl:when test="string(($var44_resultof_local_name = 'Consignor')) != 'false'">
															<xsl:value-of select="'consignor'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:if test="string(($var44_resultof_local_name = 'IntermediateCarrier')) != 'false'">
																<xsl:value-of select="'mid_transit'"/>
															</xsl:if>
														</xsl:otherwise>
													</xsl:choose>
												</trade_type>
											</xsl:if>
											<xsl:for-each select="ns0:Line">
												<address>
													<xsl:value-of select="string(.)"/>
												</address>
											</xsl:for-each>
											<xsl:for-each select="ns0:PostcodeID">
												<postal_code>
													<xsl:value-of select="string(.)"/>
												</postal_code>
											</xsl:for-each>
											<xsl:for-each select="ns0:CityName">
												<city>
													<xsl:value-of select="string(.)"/>
												</city>
											</xsl:for-each>
											<xsl:for-each select="ns0:CountrySubEntityID">
												<province_code>
													<xsl:value-of select="string(.)"/>
												</province_code>
											</xsl:for-each>
											<xsl:for-each select="ns0:CountrySubEntityName">
												<province_name>
													<xsl:value-of select="string(.)"/>
												</province_name>
											</xsl:for-each>
											<xsl:for-each select="ns0:CountryCode">
												<country_code>
													<xsl:value-of select="string(.)"/>
												</country_code>
											</xsl:for-each>
										</company>
									</xsl:for-each>
									<xsl:for-each select="ns0:Consignee">
										<xsl:variable name="var46_resultof_local_name" select="local-name(.)"/>
										<xsl:variable name="var47_resultof_equal" select="($var46_resultof_local_name = 'NotifyParty')"/>
										<xsl:variable name="var48_Address" select="ns0:Address"/>
										<xsl:variable name="var49_Contact" select="ns0:Contact"/>
										<xsl:variable name="var50_Communication" select="ns0:Communication"/>
										<company>
											<manifest_id>
												<xsl:choose>
													<xsl:when test="string((string($var12_val) = '2')) != 'false'">
														<xsl:value-of select="concat(concat($var11_resultof_cast, '_'), $var10_resultof_cast)"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="string($var6_JourneyID)"/>
													</xsl:otherwise>
												</xsl:choose>
											</manifest_id>
											<bill_no>
												<xsl:choose>
													<xsl:when test="string((string($var28_resultof_exists) != 'false')) != 'false'">
														<xsl:for-each select="$var21_AssociatedTransportDocument">
															<xsl:value-of select="string(ns0:ID)"/>
														</xsl:for-each>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="string($var29_TransportContractDocument/ns0:ID)"/>
													</xsl:otherwise>
												</xsl:choose>
											</bill_no>
											<bill_type>
												<xsl:choose>
													<xsl:when test="string((string($var28_resultof_exists) != 'false')) != 'false'">
														<xsl:value-of select="'1'"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="'0'"/>
													</xsl:otherwise>
												</xsl:choose>
											</bill_type>
											<xsl:if test="string((string($var28_resultof_exists) != 'false')) != 'false'">
												<parent_bill_no>
													<xsl:value-of select="string($var29_TransportContractDocument/ns0:ID)"/>
												</parent_bill_no>
											</xsl:if>
											<decl_traf_mode>
												<xsl:value-of select="$var13_val"/>
											</decl_traf_mode>
											<xsl:if test="string((string($var14_val) != 'false')) != 'false'">
												<i_e_flag>
													<xsl:choose>
														<xsl:when test="string((string($var7_resultof_equal) != 'false')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT1201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT2101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT2201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3102')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3202')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT4101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT4201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5102')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5202')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6102')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6202')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT7101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8102')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8103')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8104')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8202')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8203')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8204')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MTECEX')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:if test="string(($var4_resultof_cast = 'MTECIM')) != 'false'">
																<xsl:value-of select="'I'"/>
															</xsl:if>
														</xsl:otherwise>
													</xsl:choose>
												</i_e_flag>
											</xsl:if>
											<xsl:for-each select="ns0:ID">
												<trade_co>
													<xsl:value-of select="string(.)"/>
												</trade_co>
											</xsl:for-each>
											<xsl:for-each select="ns0:Name">
												<trade_name>
													<xsl:value-of select="string(.)"/>
												</trade_name>
											</xsl:for-each>
											<xsl:if test="string(((string($var47_resultof_equal) != 'false') or (($var46_resultof_local_name = 'Consignee') or (($var46_resultof_local_name = 'Consolidator') or (($var46_resultof_local_name = 'UNDGContact') or (($var46_resultof_local_name = 'Deconsolidator') or (($var46_resultof_local_name = 'DeliveryDestination') or (($var46_resultof_local_name = 'Consignor') or ($var46_resultof_local_name = 'IntermediateCarrier'))))))))) != 'false'">
												<trade_type>
													<xsl:choose>
														<xsl:when test="string((string($var47_resultof_equal) != 'false')) != 'false'">
															<xsl:value-of select="'notify'"/>
														</xsl:when>
														<xsl:when test="string(($var46_resultof_local_name = 'Consignee')) != 'false'">
															<xsl:value-of select="'consignee'"/>
														</xsl:when>
														<xsl:when test="string(($var46_resultof_local_name = 'Consolidator')) != 'false'">
															<xsl:value-of select="'operate_conta'"/>
														</xsl:when>
														<xsl:when test="string(($var46_resultof_local_name = 'UNDGContact')) != 'false'">
															<xsl:value-of select="'danger'"/>
														</xsl:when>
														<xsl:when test="string(($var46_resultof_local_name = 'Deconsolidator')) != 'false'">
															<xsl:value-of select="'operate_conta'"/>
														</xsl:when>
														<xsl:when test="string(($var46_resultof_local_name = 'DeliveryDestination')) != 'false'">
															<xsl:value-of select="'delivery'"/>
														</xsl:when>
														<xsl:when test="string(($var46_resultof_local_name = 'Consignor')) != 'false'">
															<xsl:value-of select="'consignor'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:if test="string(($var46_resultof_local_name = 'IntermediateCarrier')) != 'false'">
																<xsl:value-of select="'mid_transit'"/>
															</xsl:if>
														</xsl:otherwise>
													</xsl:choose>
												</trade_type>
											</xsl:if>
											<xsl:for-each select="$var48_Address/ns0:Line">
												<address>
													<xsl:value-of select="string(.)"/>
												</address>
											</xsl:for-each>
											<xsl:for-each select="$var48_Address/ns0:PostcodeID">
												<postal_code>
													<xsl:value-of select="string(.)"/>
												</postal_code>
											</xsl:for-each>
											<xsl:for-each select="$var48_Address/ns0:CityName">
												<city>
													<xsl:value-of select="string(.)"/>
												</city>
											</xsl:for-each>
											<xsl:for-each select="$var48_Address/ns0:CountrySubEntityID">
												<province_code>
													<xsl:value-of select="string(.)"/>
												</province_code>
											</xsl:for-each>
											<xsl:for-each select="$var48_Address/ns0:CountrySubEntityName">
												<province_name>
													<xsl:value-of select="string(.)"/>
												</province_name>
											</xsl:for-each>
											<xsl:for-each select="$var48_Address/ns0:CountryCode">
												<country_code>
													<xsl:value-of select="string(.)"/>
												</country_code>
											</xsl:for-each>
											<xsl:variable name="var51_result">
												<xsl:for-each select="$var50_Communication">
													<xsl:choose>
														<xsl:when test="string(('TE' = string(ns0:TypeID))) != 'false'">
															<xsl:value-of select="'1'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:value-of select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:for-each>
											</xsl:variable>
											<xsl:choose>
												<xsl:when test="string(boolean(string($var51_result))) != 'false'">
													<xsl:for-each select="$var50_Communication[('TE' = string(ns0:TypeID))][not((string(string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1')))) = '0'))][not((string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))) = '0'))]">
														<trade_phone>
															<xsl:value-of select="substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))"/>
														</trade_phone>
													</xsl:for-each>
												</xsl:when>
												<xsl:otherwise>
													<xsl:variable name="var52_resultof_first" select="';'"/>
													<xsl:variable name="var53_resultof_substring" select="substring($var52_resultof_first, '1', (string-length($var52_resultof_first) - '1'))"/>
													<xsl:variable name="var54_resultof_string_length" select="string-length($var53_resultof_substring)"/>
													<xsl:if test="string(not((string($var54_resultof_string_length) = '0'))) != 'false'">
														<xsl:if test="string(not(($var54_resultof_string_length = '0'))) != 'false'">
															<trade_phone>
																<xsl:value-of select="$var53_resultof_substring"/>
															</trade_phone>
														</xsl:if>
													</xsl:if>
												</xsl:otherwise>
											</xsl:choose>
											<xsl:variable name="var55_result">
												<xsl:for-each select="$var50_Communication">
													<xsl:choose>
														<xsl:when test="string((string(ns0:TypeID) = 'FX')) != 'false'">
															<xsl:value-of select="'1'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:value-of select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:for-each>
											</xsl:variable>
											<xsl:choose>
												<xsl:when test="string(boolean(string($var55_result))) != 'false'">
													<xsl:for-each select="$var50_Communication[(string(ns0:TypeID) = 'FX')][not((string(string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1')))) = '0'))][not((string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))) = '0'))]">
														<trade_fax>
															<xsl:value-of select="substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))"/>
														</trade_fax>
													</xsl:for-each>
												</xsl:when>
												<xsl:otherwise>
													<xsl:variable name="var56_resultof_first" select="';'"/>
													<xsl:variable name="var57_resultof_substring" select="substring($var56_resultof_first, '1', (string-length($var56_resultof_first) - '1'))"/>
													<xsl:variable name="var58_resultof_string_length" select="string-length($var57_resultof_substring)"/>
													<xsl:if test="string(not((string($var58_resultof_string_length) = '0'))) != 'false'">
														<xsl:if test="string(not(($var58_resultof_string_length = '0'))) != 'false'">
															<trade_fax>
																<xsl:value-of select="$var57_resultof_substring"/>
															</trade_fax>
														</xsl:if>
													</xsl:if>
												</xsl:otherwise>
											</xsl:choose>
											<xsl:variable name="var59_result">
												<xsl:for-each select="$var50_Communication">
													<xsl:choose>
														<xsl:when test="string((string(ns0:TypeID) = 'EM')) != 'false'">
															<xsl:value-of select="'1'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:value-of select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:for-each>
											</xsl:variable>
											<xsl:choose>
												<xsl:when test="string(boolean(string($var59_result))) != 'false'">
													<xsl:for-each select="$var50_Communication[(string(ns0:TypeID) = 'EM')][not((string(string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1')))) = '0'))][not((string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))) = '0'))]">
														<trade_email>
															<xsl:value-of select="substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))"/>
														</trade_email>
													</xsl:for-each>
												</xsl:when>
												<xsl:otherwise>
													<xsl:variable name="var60_resultof_first" select="';'"/>
													<xsl:variable name="var61_resultof_substring" select="substring($var60_resultof_first, '1', (string-length($var60_resultof_first) - '1'))"/>
													<xsl:variable name="var62_resultof_string_length" select="string-length($var61_resultof_substring)"/>
													<xsl:if test="string(not((string($var62_resultof_string_length) = '0'))) != 'false'">
														<xsl:if test="string(not(($var62_resultof_string_length = '0'))) != 'false'">
															<trade_email>
																<xsl:value-of select="$var61_resultof_substring"/>
															</trade_email>
														</xsl:if>
													</xsl:if>
												</xsl:otherwise>
											</xsl:choose>
											<xsl:for-each select="$var49_Contact/ns0:Name">
												<person_name>
													<xsl:value-of select="string(.)"/>
												</person_name>
											</xsl:for-each>
											<xsl:variable name="var66_result">
												<xsl:for-each select="$var49_Contact">
													<xsl:variable name="var64_result">
														<xsl:for-each select="ns0:Communication">
															<xsl:choose>
																<xsl:when test="string(('TE' = string(ns0:TypeID))) != 'false'">
																	<xsl:value-of select="'1'"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:value-of select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:for-each>
													</xsl:variable>
													<xsl:variable name="var65_result" select="boolean(string($var64_result))"/>
													<xsl:choose>
														<xsl:when test="string((string($var65_result) != 'false')) != 'false'">
															<xsl:value-of select="'1'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:value-of select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:for-each>
											</xsl:variable>
											<xsl:choose>
												<xsl:when test="string(boolean(string($var66_result))) != 'false'">
													<xsl:for-each select="$var49_Contact/ns0:Communication[('TE' = string(ns0:TypeID))][not((string(string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1')))) = '0'))][not((string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))) = '0'))]">
														<person_phone>
															<xsl:value-of select="substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))"/>
														</person_phone>
													</xsl:for-each>
												</xsl:when>
												<xsl:otherwise>
													<xsl:variable name="var67_resultof_first" select="';'"/>
													<xsl:variable name="var68_resultof_substring" select="substring($var67_resultof_first, '1', (string-length($var67_resultof_first) - '1'))"/>
													<xsl:variable name="var69_resultof_string_length" select="string-length($var68_resultof_substring)"/>
													<xsl:if test="string(not((string($var69_resultof_string_length) = '0'))) != 'false'">
														<xsl:if test="string(not(($var69_resultof_string_length = '0'))) != 'false'">
															<person_phone>
																<xsl:value-of select="$var68_resultof_substring"/>
															</person_phone>
														</xsl:if>
													</xsl:if>
												</xsl:otherwise>
											</xsl:choose>
											<xsl:variable name="var73_result">
												<xsl:for-each select="$var49_Contact">
													<xsl:variable name="var71_result">
														<xsl:for-each select="ns0:Communication">
															<xsl:choose>
																<xsl:when test="string((string(ns0:TypeID) = 'FX')) != 'false'">
																	<xsl:value-of select="'1'"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:value-of select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:for-each>
													</xsl:variable>
													<xsl:variable name="var72_result" select="boolean(string($var71_result))"/>
													<xsl:choose>
														<xsl:when test="string((string($var72_result) != 'false')) != 'false'">
															<xsl:value-of select="'1'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:value-of select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:for-each>
											</xsl:variable>
											<xsl:choose>
												<xsl:when test="string(boolean(string($var73_result))) != 'false'">
													<xsl:for-each select="$var49_Contact/ns0:Communication[(string(ns0:TypeID) = 'FX')][not((string(string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1')))) = '0'))][not((string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))) = '0'))]">
														<person_fax>
															<xsl:value-of select="substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))"/>
														</person_fax>
													</xsl:for-each>
												</xsl:when>
												<xsl:otherwise>
													<xsl:variable name="var74_resultof_first" select="';'"/>
													<xsl:variable name="var75_resultof_substring" select="substring($var74_resultof_first, '1', (string-length($var74_resultof_first) - '1'))"/>
													<xsl:variable name="var76_resultof_string_length" select="string-length($var75_resultof_substring)"/>
													<xsl:if test="string(not((string($var76_resultof_string_length) = '0'))) != 'false'">
														<xsl:if test="string(not(($var76_resultof_string_length = '0'))) != 'false'">
															<person_fax>
																<xsl:value-of select="$var75_resultof_substring"/>
															</person_fax>
														</xsl:if>
													</xsl:if>
												</xsl:otherwise>
											</xsl:choose>
											<xsl:variable name="var80_result">
												<xsl:for-each select="$var49_Contact">
													<xsl:variable name="var78_result">
														<xsl:for-each select="ns0:Communication">
															<xsl:choose>
																<xsl:when test="string((string(ns0:TypeID) = 'EM')) != 'false'">
																	<xsl:value-of select="'1'"/>
																</xsl:when>
																<xsl:otherwise>
																	<xsl:value-of select="''"/>
																</xsl:otherwise>
															</xsl:choose>
														</xsl:for-each>
													</xsl:variable>
													<xsl:variable name="var79_result" select="boolean(string($var78_result))"/>
													<xsl:choose>
														<xsl:when test="string((string($var79_result) != 'false')) != 'false'">
															<xsl:value-of select="'1'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:value-of select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:for-each>
											</xsl:variable>
											<xsl:choose>
												<xsl:when test="string(boolean(string($var80_result))) != 'false'">
													<xsl:for-each select="$var49_Contact/ns0:Communication[(string(ns0:TypeID) = 'EM')][not((string(string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1')))) = '0'))][not((string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))) = '0'))]">
														<person_email>
															<xsl:value-of select="substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))"/>
														</person_email>
													</xsl:for-each>
												</xsl:when>
												<xsl:otherwise>
													<xsl:variable name="var81_resultof_first" select="';'"/>
													<xsl:variable name="var82_resultof_substring" select="substring($var81_resultof_first, '1', (string-length($var81_resultof_first) - '1'))"/>
													<xsl:variable name="var83_resultof_string_length" select="string-length($var82_resultof_substring)"/>
													<xsl:if test="string(not((string($var83_resultof_string_length) = '0'))) != 'false'">
														<xsl:if test="string(not(($var83_resultof_string_length = '0'))) != 'false'">
															<person_email>
																<xsl:value-of select="$var82_resultof_substring"/>
															</person_email>
														</xsl:if>
													</xsl:if>
												</xsl:otherwise>
											</xsl:choose>
											<xsl:for-each select="ns0:AEO">
												<AEO_NO>
													<xsl:value-of select="string(.)"/>
												</AEO_NO>
											</xsl:for-each>
										</company>
									</xsl:for-each>
									<xsl:for-each select="ns0:IntermediateCarrier">
										<xsl:variable name="var84_resultof_local_name" select="local-name(.)"/>
										<xsl:variable name="var85_resultof_equal" select="($var84_resultof_local_name = 'NotifyParty')"/>
										<xsl:variable name="var86_Communication" select="ns0:Communication"/>
										<company>
											<manifest_id>
												<xsl:choose>
													<xsl:when test="string((string($var12_val) = '2')) != 'false'">
														<xsl:value-of select="concat(concat($var11_resultof_cast, '_'), $var10_resultof_cast)"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="string($var6_JourneyID)"/>
													</xsl:otherwise>
												</xsl:choose>
											</manifest_id>
											<bill_no>
												<xsl:choose>
													<xsl:when test="string((string($var28_resultof_exists) != 'false')) != 'false'">
														<xsl:for-each select="$var21_AssociatedTransportDocument">
															<xsl:value-of select="string(ns0:ID)"/>
														</xsl:for-each>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="string($var29_TransportContractDocument/ns0:ID)"/>
													</xsl:otherwise>
												</xsl:choose>
											</bill_no>
											<bill_type>
												<xsl:choose>
													<xsl:when test="string((string($var28_resultof_exists) != 'false')) != 'false'">
														<xsl:value-of select="'1'"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="'0'"/>
													</xsl:otherwise>
												</xsl:choose>
											</bill_type>
											<xsl:if test="string((string($var28_resultof_exists) != 'false')) != 'false'">
												<parent_bill_no>
													<xsl:value-of select="string($var29_TransportContractDocument/ns0:ID)"/>
												</parent_bill_no>
											</xsl:if>
											<decl_traf_mode>
												<xsl:value-of select="$var13_val"/>
											</decl_traf_mode>
											<xsl:if test="string((string($var14_val) != 'false')) != 'false'">
												<i_e_flag>
													<xsl:choose>
														<xsl:when test="string((string($var7_resultof_equal) != 'false')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT1201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT2101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT2201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3102')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3202')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT4101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT4201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5102')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5202')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6102')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6202')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT7101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8102')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8103')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8104')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8202')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8203')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8204')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MTECEX')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:if test="string(($var4_resultof_cast = 'MTECIM')) != 'false'">
																<xsl:value-of select="'I'"/>
															</xsl:if>
														</xsl:otherwise>
													</xsl:choose>
												</i_e_flag>
											</xsl:if>
											<xsl:for-each select="ns0:ID">
												<trade_co>
													<xsl:value-of select="string(.)"/>
												</trade_co>
											</xsl:for-each>
											<xsl:if test="string(((string($var85_resultof_equal) != 'false') or (($var84_resultof_local_name = 'Consignee') or (($var84_resultof_local_name = 'Consolidator') or (($var84_resultof_local_name = 'UNDGContact') or (($var84_resultof_local_name = 'Deconsolidator') or (($var84_resultof_local_name = 'DeliveryDestination') or (($var84_resultof_local_name = 'Consignor') or ($var84_resultof_local_name = 'IntermediateCarrier'))))))))) != 'false'">
												<trade_type>
													<xsl:choose>
														<xsl:when test="string((string($var85_resultof_equal) != 'false')) != 'false'">
															<xsl:value-of select="'notify'"/>
														</xsl:when>
														<xsl:when test="string(($var84_resultof_local_name = 'Consignee')) != 'false'">
															<xsl:value-of select="'consignee'"/>
														</xsl:when>
														<xsl:when test="string(($var84_resultof_local_name = 'Consolidator')) != 'false'">
															<xsl:value-of select="'operate_conta'"/>
														</xsl:when>
														<xsl:when test="string(($var84_resultof_local_name = 'UNDGContact')) != 'false'">
															<xsl:value-of select="'danger'"/>
														</xsl:when>
														<xsl:when test="string(($var84_resultof_local_name = 'Deconsolidator')) != 'false'">
															<xsl:value-of select="'operate_conta'"/>
														</xsl:when>
														<xsl:when test="string(($var84_resultof_local_name = 'DeliveryDestination')) != 'false'">
															<xsl:value-of select="'delivery'"/>
														</xsl:when>
														<xsl:when test="string(($var84_resultof_local_name = 'Consignor')) != 'false'">
															<xsl:value-of select="'consignor'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:if test="string(($var84_resultof_local_name = 'IntermediateCarrier')) != 'false'">
																<xsl:value-of select="'mid_transit'"/>
															</xsl:if>
														</xsl:otherwise>
													</xsl:choose>
												</trade_type>
											</xsl:if>
											<xsl:variable name="var87_result">
												<xsl:for-each select="$var86_Communication">
													<xsl:choose>
														<xsl:when test="string(('TE' = string(ns0:TypeID))) != 'false'">
															<xsl:value-of select="'1'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:value-of select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:for-each>
											</xsl:variable>
											<xsl:choose>
												<xsl:when test="string(boolean(string($var87_result))) != 'false'">
													<xsl:for-each select="$var86_Communication[('TE' = string(ns0:TypeID))][not((string(string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1')))) = '0'))][not((string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))) = '0'))]">
														<trade_phone>
															<xsl:value-of select="substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))"/>
														</trade_phone>
													</xsl:for-each>
												</xsl:when>
												<xsl:otherwise>
													<xsl:variable name="var88_resultof_first" select="';'"/>
													<xsl:variable name="var89_resultof_substring" select="substring($var88_resultof_first, '1', (string-length($var88_resultof_first) - '1'))"/>
													<xsl:variable name="var90_resultof_string_length" select="string-length($var89_resultof_substring)"/>
													<xsl:if test="string(not((string($var90_resultof_string_length) = '0'))) != 'false'">
														<xsl:if test="string(not(($var90_resultof_string_length = '0'))) != 'false'">
															<trade_phone>
																<xsl:value-of select="$var89_resultof_substring"/>
															</trade_phone>
														</xsl:if>
													</xsl:if>
												</xsl:otherwise>
											</xsl:choose>
											<xsl:variable name="var91_result">
												<xsl:for-each select="$var86_Communication">
													<xsl:choose>
														<xsl:when test="string((string(ns0:TypeID) = 'FX')) != 'false'">
															<xsl:value-of select="'1'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:value-of select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:for-each>
											</xsl:variable>
											<xsl:choose>
												<xsl:when test="string(boolean(string($var91_result))) != 'false'">
													<xsl:for-each select="$var86_Communication[(string(ns0:TypeID) = 'FX')][not((string(string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1')))) = '0'))][not((string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))) = '0'))]">
														<trade_fax>
															<xsl:value-of select="substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))"/>
														</trade_fax>
													</xsl:for-each>
												</xsl:when>
												<xsl:otherwise>
													<xsl:variable name="var92_resultof_first" select="';'"/>
													<xsl:variable name="var93_resultof_substring" select="substring($var92_resultof_first, '1', (string-length($var92_resultof_first) - '1'))"/>
													<xsl:variable name="var94_resultof_string_length" select="string-length($var93_resultof_substring)"/>
													<xsl:if test="string(not((string($var94_resultof_string_length) = '0'))) != 'false'">
														<xsl:if test="string(not(($var94_resultof_string_length = '0'))) != 'false'">
															<trade_fax>
																<xsl:value-of select="$var93_resultof_substring"/>
															</trade_fax>
														</xsl:if>
													</xsl:if>
												</xsl:otherwise>
											</xsl:choose>
											<xsl:variable name="var95_result">
												<xsl:for-each select="$var86_Communication">
													<xsl:choose>
														<xsl:when test="string((string(ns0:TypeID) = 'EM')) != 'false'">
															<xsl:value-of select="'1'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:value-of select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:for-each>
											</xsl:variable>
											<xsl:choose>
												<xsl:when test="string(boolean(string($var95_result))) != 'false'">
													<xsl:for-each select="$var86_Communication[(string(ns0:TypeID) = 'EM')][not((string(string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1')))) = '0'))][not((string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))) = '0'))]">
														<trade_email>
															<xsl:value-of select="substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))"/>
														</trade_email>
													</xsl:for-each>
												</xsl:when>
												<xsl:otherwise>
													<xsl:variable name="var96_resultof_first" select="';'"/>
													<xsl:variable name="var97_resultof_substring" select="substring($var96_resultof_first, '1', (string-length($var96_resultof_first) - '1'))"/>
													<xsl:variable name="var98_resultof_string_length" select="string-length($var97_resultof_substring)"/>
													<xsl:if test="string(not((string($var98_resultof_string_length) = '0'))) != 'false'">
														<xsl:if test="string(not(($var98_resultof_string_length = '0'))) != 'false'">
															<trade_email>
																<xsl:value-of select="$var97_resultof_substring"/>
															</trade_email>
														</xsl:if>
													</xsl:if>
												</xsl:otherwise>
											</xsl:choose>
										</company>
									</xsl:for-each>
									<xsl:for-each select="ns0:Consignor">
										<xsl:variable name="var99_resultof_local_name" select="local-name(.)"/>
										<xsl:variable name="var100_resultof_equal" select="($var99_resultof_local_name = 'NotifyParty')"/>
										<xsl:variable name="var101_Address" select="ns0:Address"/>
										<xsl:variable name="var102_Communication" select="ns0:Communication"/>
										<company>
											<manifest_id>
												<xsl:choose>
													<xsl:when test="string((string($var12_val) = '2')) != 'false'">
														<xsl:value-of select="concat(concat($var11_resultof_cast, '_'), $var10_resultof_cast)"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="string($var6_JourneyID)"/>
													</xsl:otherwise>
												</xsl:choose>
											</manifest_id>
											<bill_no>
												<xsl:choose>
													<xsl:when test="string((string($var28_resultof_exists) != 'false')) != 'false'">
														<xsl:for-each select="$var21_AssociatedTransportDocument">
															<xsl:value-of select="string(ns0:ID)"/>
														</xsl:for-each>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="string($var29_TransportContractDocument/ns0:ID)"/>
													</xsl:otherwise>
												</xsl:choose>
											</bill_no>
											<bill_type>
												<xsl:choose>
													<xsl:when test="string((string($var28_resultof_exists) != 'false')) != 'false'">
														<xsl:value-of select="'1'"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="'0'"/>
													</xsl:otherwise>
												</xsl:choose>
											</bill_type>
											<xsl:if test="string((string($var28_resultof_exists) != 'false')) != 'false'">
												<parent_bill_no>
													<xsl:value-of select="string($var29_TransportContractDocument/ns0:ID)"/>
												</parent_bill_no>
											</xsl:if>
											<decl_traf_mode>
												<xsl:value-of select="$var13_val"/>
											</decl_traf_mode>
											<xsl:if test="string((string($var14_val) != 'false')) != 'false'">
												<i_e_flag>
													<xsl:choose>
														<xsl:when test="string((string($var7_resultof_equal) != 'false')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT1201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT2101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT2201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3102')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3202')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT4101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT4201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5102')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5202')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6102')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6202')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT7101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8102')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8103')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8104')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8202')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8203')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8204')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MTECEX')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:if test="string(($var4_resultof_cast = 'MTECIM')) != 'false'">
																<xsl:value-of select="'I'"/>
															</xsl:if>
														</xsl:otherwise>
													</xsl:choose>
												</i_e_flag>
											</xsl:if>
											<xsl:for-each select="ns0:ID">
												<trade_co>
													<xsl:value-of select="string(.)"/>
												</trade_co>
											</xsl:for-each>
											<xsl:for-each select="ns0:Name">
												<trade_name>
													<xsl:value-of select="string(.)"/>
												</trade_name>
											</xsl:for-each>
											<xsl:if test="string(((string($var100_resultof_equal) != 'false') or (($var99_resultof_local_name = 'Consignee') or (($var99_resultof_local_name = 'Consolidator') or (($var99_resultof_local_name = 'UNDGContact') or (($var99_resultof_local_name = 'Deconsolidator') or (($var99_resultof_local_name = 'DeliveryDestination') or (($var99_resultof_local_name = 'Consignor') or ($var99_resultof_local_name = 'IntermediateCarrier'))))))))) != 'false'">
												<trade_type>
													<xsl:choose>
														<xsl:when test="string((string($var100_resultof_equal) != 'false')) != 'false'">
															<xsl:value-of select="'notify'"/>
														</xsl:when>
														<xsl:when test="string(($var99_resultof_local_name = 'Consignee')) != 'false'">
															<xsl:value-of select="'consignee'"/>
														</xsl:when>
														<xsl:when test="string(($var99_resultof_local_name = 'Consolidator')) != 'false'">
															<xsl:value-of select="'operate_conta'"/>
														</xsl:when>
														<xsl:when test="string(($var99_resultof_local_name = 'UNDGContact')) != 'false'">
															<xsl:value-of select="'danger'"/>
														</xsl:when>
														<xsl:when test="string(($var99_resultof_local_name = 'Deconsolidator')) != 'false'">
															<xsl:value-of select="'operate_conta'"/>
														</xsl:when>
														<xsl:when test="string(($var99_resultof_local_name = 'DeliveryDestination')) != 'false'">
															<xsl:value-of select="'delivery'"/>
														</xsl:when>
														<xsl:when test="string(($var99_resultof_local_name = 'Consignor')) != 'false'">
															<xsl:value-of select="'consignor'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:if test="string(($var99_resultof_local_name = 'IntermediateCarrier')) != 'false'">
																<xsl:value-of select="'mid_transit'"/>
															</xsl:if>
														</xsl:otherwise>
													</xsl:choose>
												</trade_type>
											</xsl:if>
											<xsl:for-each select="$var101_Address/ns0:Line">
												<address>
													<xsl:value-of select="string(.)"/>
												</address>
											</xsl:for-each>
											<xsl:for-each select="$var101_Address/ns0:PostcodeID">
												<postal_code>
													<xsl:value-of select="string(.)"/>
												</postal_code>
											</xsl:for-each>
											<xsl:for-each select="$var101_Address/ns0:CityName">
												<city>
													<xsl:value-of select="string(.)"/>
												</city>
											</xsl:for-each>
											<xsl:for-each select="$var101_Address/ns0:CountrySubEntityID">
												<province_code>
													<xsl:value-of select="string(.)"/>
												</province_code>
											</xsl:for-each>
											<xsl:for-each select="$var101_Address/ns0:CountrySubEntityName">
												<province_name>
													<xsl:value-of select="string(.)"/>
												</province_name>
											</xsl:for-each>
											<xsl:for-each select="$var101_Address/ns0:CountryCode">
												<country_code>
													<xsl:value-of select="string(.)"/>
												</country_code>
											</xsl:for-each>
											<xsl:variable name="var103_result">
												<xsl:for-each select="$var102_Communication">
													<xsl:choose>
														<xsl:when test="string(('TE' = string(ns0:TypeID))) != 'false'">
															<xsl:value-of select="'1'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:value-of select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:for-each>
											</xsl:variable>
											<xsl:choose>
												<xsl:when test="string(boolean(string($var103_result))) != 'false'">
													<xsl:for-each select="$var102_Communication[('TE' = string(ns0:TypeID))][not((string(string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1')))) = '0'))][not((string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))) = '0'))]">
														<trade_phone>
															<xsl:value-of select="substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))"/>
														</trade_phone>
													</xsl:for-each>
												</xsl:when>
												<xsl:otherwise>
													<xsl:variable name="var104_resultof_first" select="';'"/>
													<xsl:variable name="var105_resultof_substring" select="substring($var104_resultof_first, '1', (string-length($var104_resultof_first) - '1'))"/>
													<xsl:variable name="var106_resultof_string_length" select="string-length($var105_resultof_substring)"/>
													<xsl:if test="string(not((string($var106_resultof_string_length) = '0'))) != 'false'">
														<xsl:if test="string(not(($var106_resultof_string_length = '0'))) != 'false'">
															<trade_phone>
																<xsl:value-of select="$var105_resultof_substring"/>
															</trade_phone>
														</xsl:if>
													</xsl:if>
												</xsl:otherwise>
											</xsl:choose>
											<xsl:variable name="var107_result">
												<xsl:for-each select="$var102_Communication">
													<xsl:choose>
														<xsl:when test="string((string(ns0:TypeID) = 'FX')) != 'false'">
															<xsl:value-of select="'1'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:value-of select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:for-each>
											</xsl:variable>
											<xsl:choose>
												<xsl:when test="string(boolean(string($var107_result))) != 'false'">
													<xsl:for-each select="$var102_Communication[(string(ns0:TypeID) = 'FX')][not((string(string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1')))) = '0'))][not((string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))) = '0'))]">
														<trade_fax>
															<xsl:value-of select="substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))"/>
														</trade_fax>
													</xsl:for-each>
												</xsl:when>
												<xsl:otherwise>
													<xsl:variable name="var108_resultof_first" select="';'"/>
													<xsl:variable name="var109_resultof_substring" select="substring($var108_resultof_first, '1', (string-length($var108_resultof_first) - '1'))"/>
													<xsl:variable name="var110_resultof_string_length" select="string-length($var109_resultof_substring)"/>
													<xsl:if test="string(not((string($var110_resultof_string_length) = '0'))) != 'false'">
														<xsl:if test="string(not(($var110_resultof_string_length = '0'))) != 'false'">
															<trade_fax>
																<xsl:value-of select="$var109_resultof_substring"/>
															</trade_fax>
														</xsl:if>
													</xsl:if>
												</xsl:otherwise>
											</xsl:choose>
											<xsl:variable name="var111_result">
												<xsl:for-each select="$var102_Communication">
													<xsl:choose>
														<xsl:when test="string((string(ns0:TypeID) = 'EM')) != 'false'">
															<xsl:value-of select="'1'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:value-of select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:for-each>
											</xsl:variable>
											<xsl:choose>
												<xsl:when test="string(boolean(string($var111_result))) != 'false'">
													<xsl:for-each select="$var102_Communication[(string(ns0:TypeID) = 'EM')][not((string(string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1')))) = '0'))][not((string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))) = '0'))]">
														<trade_email>
															<xsl:value-of select="substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))"/>
														</trade_email>
													</xsl:for-each>
												</xsl:when>
												<xsl:otherwise>
													<xsl:variable name="var112_resultof_first" select="';'"/>
													<xsl:variable name="var113_resultof_substring" select="substring($var112_resultof_first, '1', (string-length($var112_resultof_first) - '1'))"/>
													<xsl:variable name="var114_resultof_string_length" select="string-length($var113_resultof_substring)"/>
													<xsl:if test="string(not((string($var114_resultof_string_length) = '0'))) != 'false'">
														<xsl:if test="string(not(($var114_resultof_string_length = '0'))) != 'false'">
															<trade_email>
																<xsl:value-of select="$var113_resultof_substring"/>
															</trade_email>
														</xsl:if>
													</xsl:if>
												</xsl:otherwise>
											</xsl:choose>
											<xsl:for-each select="ns0:AEO">
												<AEO_NO>
													<xsl:value-of select="string(.)"/>
												</AEO_NO>
											</xsl:for-each>
										</company>
									</xsl:for-each>
									<xsl:for-each select="ns0:NotifyParty">
										<xsl:variable name="var115_resultof_local_name" select="local-name(.)"/>
										<xsl:variable name="var116_resultof_equal" select="($var115_resultof_local_name = 'NotifyParty')"/>
										<xsl:variable name="var117_Address" select="ns0:Address"/>
										<xsl:variable name="var118_Communication" select="ns0:Communication"/>
										<company>
											<manifest_id>
												<xsl:choose>
													<xsl:when test="string((string($var12_val) = '2')) != 'false'">
														<xsl:value-of select="concat(concat($var11_resultof_cast, '_'), $var10_resultof_cast)"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="string($var6_JourneyID)"/>
													</xsl:otherwise>
												</xsl:choose>
											</manifest_id>
											<bill_no>
												<xsl:choose>
													<xsl:when test="string((string($var28_resultof_exists) != 'false')) != 'false'">
														<xsl:for-each select="$var21_AssociatedTransportDocument">
															<xsl:value-of select="string(ns0:ID)"/>
														</xsl:for-each>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="string($var29_TransportContractDocument/ns0:ID)"/>
													</xsl:otherwise>
												</xsl:choose>
											</bill_no>
											<bill_type>
												<xsl:choose>
													<xsl:when test="string((string($var28_resultof_exists) != 'false')) != 'false'">
														<xsl:value-of select="'1'"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="'0'"/>
													</xsl:otherwise>
												</xsl:choose>
											</bill_type>
											<xsl:if test="string((string($var28_resultof_exists) != 'false')) != 'false'">
												<parent_bill_no>
													<xsl:value-of select="string($var29_TransportContractDocument/ns0:ID)"/>
												</parent_bill_no>
											</xsl:if>
											<decl_traf_mode>
												<xsl:value-of select="$var13_val"/>
											</decl_traf_mode>
											<xsl:if test="string((string($var14_val) != 'false')) != 'false'">
												<i_e_flag>
													<xsl:choose>
														<xsl:when test="string((string($var7_resultof_equal) != 'false')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT1201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT2101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT2201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3102')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3202')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT4101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT4201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5102')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5202')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6102')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6202')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT7101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8102')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8103')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8104')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8202')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8203')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8204')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MTECEX')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:if test="string(($var4_resultof_cast = 'MTECIM')) != 'false'">
																<xsl:value-of select="'I'"/>
															</xsl:if>
														</xsl:otherwise>
													</xsl:choose>
												</i_e_flag>
											</xsl:if>
											<xsl:for-each select="ns0:ID">
												<trade_co>
													<xsl:value-of select="string(.)"/>
												</trade_co>
											</xsl:for-each>
											<xsl:for-each select="ns0:Name">
												<trade_name>
													<xsl:value-of select="string(.)"/>
												</trade_name>
											</xsl:for-each>
											<xsl:if test="string(((string($var116_resultof_equal) != 'false') or (($var115_resultof_local_name = 'Consignee') or (($var115_resultof_local_name = 'Consolidator') or (($var115_resultof_local_name = 'UNDGContact') or (($var115_resultof_local_name = 'Deconsolidator') or (($var115_resultof_local_name = 'DeliveryDestination') or (($var115_resultof_local_name = 'Consignor') or ($var115_resultof_local_name = 'IntermediateCarrier'))))))))) != 'false'">
												<trade_type>
													<xsl:choose>
														<xsl:when test="string((string($var116_resultof_equal) != 'false')) != 'false'">
															<xsl:value-of select="'notify'"/>
														</xsl:when>
														<xsl:when test="string(($var115_resultof_local_name = 'Consignee')) != 'false'">
															<xsl:value-of select="'consignee'"/>
														</xsl:when>
														<xsl:when test="string(($var115_resultof_local_name = 'Consolidator')) != 'false'">
															<xsl:value-of select="'operate_conta'"/>
														</xsl:when>
														<xsl:when test="string(($var115_resultof_local_name = 'UNDGContact')) != 'false'">
															<xsl:value-of select="'danger'"/>
														</xsl:when>
														<xsl:when test="string(($var115_resultof_local_name = 'Deconsolidator')) != 'false'">
															<xsl:value-of select="'operate_conta'"/>
														</xsl:when>
														<xsl:when test="string(($var115_resultof_local_name = 'DeliveryDestination')) != 'false'">
															<xsl:value-of select="'delivery'"/>
														</xsl:when>
														<xsl:when test="string(($var115_resultof_local_name = 'Consignor')) != 'false'">
															<xsl:value-of select="'consignor'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:if test="string(($var115_resultof_local_name = 'IntermediateCarrier')) != 'false'">
																<xsl:value-of select="'mid_transit'"/>
															</xsl:if>
														</xsl:otherwise>
													</xsl:choose>
												</trade_type>
											</xsl:if>
											<xsl:for-each select="$var117_Address/ns0:Line">
												<address>
													<xsl:value-of select="string(.)"/>
												</address>
											</xsl:for-each>
											<xsl:for-each select="$var117_Address/ns0:PostcodeID">
												<postal_code>
													<xsl:value-of select="string(.)"/>
												</postal_code>
											</xsl:for-each>
											<xsl:for-each select="$var117_Address/ns0:CityName">
												<city>
													<xsl:value-of select="string(.)"/>
												</city>
											</xsl:for-each>
											<xsl:for-each select="$var117_Address/ns0:CountrySubEntityID">
												<province_code>
													<xsl:value-of select="string(.)"/>
												</province_code>
											</xsl:for-each>
											<xsl:for-each select="$var117_Address/ns0:CountrySubEntityName">
												<province_name>
													<xsl:value-of select="string(.)"/>
												</province_name>
											</xsl:for-each>
											<xsl:for-each select="$var117_Address/ns0:CountryCode">
												<country_code>
													<xsl:value-of select="string(.)"/>
												</country_code>
											</xsl:for-each>
											<xsl:variable name="var119_result">
												<xsl:for-each select="$var118_Communication">
													<xsl:choose>
														<xsl:when test="string(('TE' = string(ns0:TypeID))) != 'false'">
															<xsl:value-of select="'1'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:value-of select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:for-each>
											</xsl:variable>
											<xsl:choose>
												<xsl:when test="string(boolean(string($var119_result))) != 'false'">
													<xsl:for-each select="$var118_Communication[('TE' = string(ns0:TypeID))][not((string(string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1')))) = '0'))][not((string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))) = '0'))]">
														<trade_phone>
															<xsl:value-of select="substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))"/>
														</trade_phone>
													</xsl:for-each>
												</xsl:when>
												<xsl:otherwise>
													<xsl:variable name="var120_resultof_first" select="';'"/>
													<xsl:variable name="var121_resultof_substring" select="substring($var120_resultof_first, '1', (string-length($var120_resultof_first) - '1'))"/>
													<xsl:variable name="var122_resultof_string_length" select="string-length($var121_resultof_substring)"/>
													<xsl:if test="string(not((string($var122_resultof_string_length) = '0'))) != 'false'">
														<xsl:if test="string(not(($var122_resultof_string_length = '0'))) != 'false'">
															<trade_phone>
																<xsl:value-of select="$var121_resultof_substring"/>
															</trade_phone>
														</xsl:if>
													</xsl:if>
												</xsl:otherwise>
											</xsl:choose>
											<xsl:variable name="var123_result">
												<xsl:for-each select="$var118_Communication">
													<xsl:choose>
														<xsl:when test="string((string(ns0:TypeID) = 'FX')) != 'false'">
															<xsl:value-of select="'1'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:value-of select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:for-each>
											</xsl:variable>
											<xsl:choose>
												<xsl:when test="string(boolean(string($var123_result))) != 'false'">
													<xsl:for-each select="$var118_Communication[(string(ns0:TypeID) = 'FX')][not((string(string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1')))) = '0'))][not((string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))) = '0'))]">
														<trade_fax>
															<xsl:value-of select="substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))"/>
														</trade_fax>
													</xsl:for-each>
												</xsl:when>
												<xsl:otherwise>
													<xsl:variable name="var124_resultof_first" select="';'"/>
													<xsl:variable name="var125_resultof_substring" select="substring($var124_resultof_first, '1', (string-length($var124_resultof_first) - '1'))"/>
													<xsl:variable name="var126_resultof_string_length" select="string-length($var125_resultof_substring)"/>
													<xsl:if test="string(not((string($var126_resultof_string_length) = '0'))) != 'false'">
														<xsl:if test="string(not(($var126_resultof_string_length = '0'))) != 'false'">
															<trade_fax>
																<xsl:value-of select="$var125_resultof_substring"/>
															</trade_fax>
														</xsl:if>
													</xsl:if>
												</xsl:otherwise>
											</xsl:choose>
											<xsl:variable name="var127_result">
												<xsl:for-each select="$var118_Communication">
													<xsl:choose>
														<xsl:when test="string((string(ns0:TypeID) = 'EM')) != 'false'">
															<xsl:value-of select="'1'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:value-of select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:for-each>
											</xsl:variable>
											<xsl:choose>
												<xsl:when test="string(boolean(string($var127_result))) != 'false'">
													<xsl:for-each select="$var118_Communication[(string(ns0:TypeID) = 'EM')][not((string(string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1')))) = '0'))][not((string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))) = '0'))]">
														<trade_email>
															<xsl:value-of select="substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))"/>
														</trade_email>
													</xsl:for-each>
												</xsl:when>
												<xsl:otherwise>
													<xsl:variable name="var128_resultof_first" select="';'"/>
													<xsl:variable name="var129_resultof_substring" select="substring($var128_resultof_first, '1', (string-length($var128_resultof_first) - '1'))"/>
													<xsl:variable name="var130_resultof_string_length" select="string-length($var129_resultof_substring)"/>
													<xsl:if test="string(not((string($var130_resultof_string_length) = '0'))) != 'false'">
														<xsl:if test="string(not(($var130_resultof_string_length = '0'))) != 'false'">
															<trade_email>
																<xsl:value-of select="$var129_resultof_substring"/>
															</trade_email>
														</xsl:if>
													</xsl:if>
												</xsl:otherwise>
											</xsl:choose>
										</company>
									</xsl:for-each>
									<xsl:for-each select="ns0:UNDGContact">
										<xsl:variable name="var131_resultof_local_name" select="local-name(.)"/>
										<xsl:variable name="var132_resultof_equal" select="($var131_resultof_local_name = 'NotifyParty')"/>
										<xsl:variable name="var133_Communication" select="ns0:Communication"/>
										<company>
											<manifest_id>
												<xsl:choose>
													<xsl:when test="string((string($var12_val) = '2')) != 'false'">
														<xsl:value-of select="concat(concat($var11_resultof_cast, '_'), $var10_resultof_cast)"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="string($var6_JourneyID)"/>
													</xsl:otherwise>
												</xsl:choose>
											</manifest_id>
											<bill_no>
												<xsl:choose>
													<xsl:when test="string((string($var28_resultof_exists) != 'false')) != 'false'">
														<xsl:for-each select="$var21_AssociatedTransportDocument">
															<xsl:value-of select="string(ns0:ID)"/>
														</xsl:for-each>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="string($var29_TransportContractDocument/ns0:ID)"/>
													</xsl:otherwise>
												</xsl:choose>
											</bill_no>
											<bill_type>
												<xsl:choose>
													<xsl:when test="string((string($var28_resultof_exists) != 'false')) != 'false'">
														<xsl:value-of select="'1'"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="'0'"/>
													</xsl:otherwise>
												</xsl:choose>
											</bill_type>
											<xsl:if test="string((string($var28_resultof_exists) != 'false')) != 'false'">
												<parent_bill_no>
													<xsl:value-of select="string($var29_TransportContractDocument/ns0:ID)"/>
												</parent_bill_no>
											</xsl:if>
											<xsl:if test="string((string($var14_val) != 'false')) != 'false'">
												<decl_traf_mode>
													<xsl:choose>
														<xsl:when test="string((string($var7_resultof_equal) != 'false')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT1201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT2101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT2201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3102')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3202')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT4101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT4201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5102')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5202')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6102')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6202')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT7101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8102')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8103')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8104')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8202')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8203')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8204')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MTECEX')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:if test="string(($var4_resultof_cast = 'MTECIM')) != 'false'">
																<xsl:value-of select="'I'"/>
															</xsl:if>
														</xsl:otherwise>
													</xsl:choose>
												</decl_traf_mode>
											</xsl:if>
											<i_e_flag>
												<xsl:value-of select="$var13_val"/>
											</i_e_flag>
											<xsl:for-each select="ns0:Name">
												<trade_name>
													<xsl:value-of select="string(.)"/>
												</trade_name>
											</xsl:for-each>
											<xsl:if test="string(((string($var132_resultof_equal) != 'false') or (($var131_resultof_local_name = 'Consignee') or (($var131_resultof_local_name = 'Consolidator') or (($var131_resultof_local_name = 'UNDGContact') or (($var131_resultof_local_name = 'Deconsolidator') or (($var131_resultof_local_name = 'DeliveryDestination') or (($var131_resultof_local_name = 'Consignor') or ($var131_resultof_local_name = 'IntermediateCarrier'))))))))) != 'false'">
												<trade_type>
													<xsl:choose>
														<xsl:when test="string((string($var132_resultof_equal) != 'false')) != 'false'">
															<xsl:value-of select="'notify'"/>
														</xsl:when>
														<xsl:when test="string(($var131_resultof_local_name = 'Consignee')) != 'false'">
															<xsl:value-of select="'consignee'"/>
														</xsl:when>
														<xsl:when test="string(($var131_resultof_local_name = 'Consolidator')) != 'false'">
															<xsl:value-of select="'operate_conta'"/>
														</xsl:when>
														<xsl:when test="string(($var131_resultof_local_name = 'UNDGContact')) != 'false'">
															<xsl:value-of select="'danger'"/>
														</xsl:when>
														<xsl:when test="string(($var131_resultof_local_name = 'Deconsolidator')) != 'false'">
															<xsl:value-of select="'operate_conta'"/>
														</xsl:when>
														<xsl:when test="string(($var131_resultof_local_name = 'DeliveryDestination')) != 'false'">
															<xsl:value-of select="'delivery'"/>
														</xsl:when>
														<xsl:when test="string(($var131_resultof_local_name = 'Consignor')) != 'false'">
															<xsl:value-of select="'consignor'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:if test="string(($var131_resultof_local_name = 'IntermediateCarrier')) != 'false'">
																<xsl:value-of select="'mid_transit'"/>
															</xsl:if>
														</xsl:otherwise>
													</xsl:choose>
												</trade_type>
											</xsl:if>
											<xsl:variable name="var134_result">
												<xsl:for-each select="$var133_Communication">
													<xsl:choose>
														<xsl:when test="string(('TE' = string(ns0:TypeID))) != 'false'">
															<xsl:value-of select="'1'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:value-of select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:for-each>
											</xsl:variable>
											<xsl:choose>
												<xsl:when test="string(boolean(string($var134_result))) != 'false'">
													<xsl:for-each select="$var133_Communication[('TE' = string(ns0:TypeID))][not((string(string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1')))) = '0'))][not((string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))) = '0'))]">
														<trade_phone>
															<xsl:value-of select="substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))"/>
														</trade_phone>
													</xsl:for-each>
												</xsl:when>
												<xsl:otherwise>
													<xsl:variable name="var135_resultof_first" select="';'"/>
													<xsl:variable name="var136_resultof_substring" select="substring($var135_resultof_first, '1', (string-length($var135_resultof_first) - '1'))"/>
													<xsl:variable name="var137_resultof_string_length" select="string-length($var136_resultof_substring)"/>
													<xsl:if test="string(not((string($var137_resultof_string_length) = '0'))) != 'false'">
														<xsl:if test="string(not(($var137_resultof_string_length = '0'))) != 'false'">
															<trade_phone>
																<xsl:value-of select="$var136_resultof_substring"/>
															</trade_phone>
														</xsl:if>
													</xsl:if>
												</xsl:otherwise>
											</xsl:choose>
											<xsl:variable name="var138_result">
												<xsl:for-each select="$var133_Communication">
													<xsl:choose>
														<xsl:when test="string((string(ns0:TypeID) = 'FX')) != 'false'">
															<xsl:value-of select="'1'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:value-of select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:for-each>
											</xsl:variable>
											<xsl:choose>
												<xsl:when test="string(boolean(string($var138_result))) != 'false'">
													<xsl:for-each select="$var133_Communication[(string(ns0:TypeID) = 'FX')][not((string(string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1')))) = '0'))][not((string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))) = '0'))]">
														<trade_fax>
															<xsl:value-of select="substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))"/>
														</trade_fax>
													</xsl:for-each>
												</xsl:when>
												<xsl:otherwise>
													<xsl:variable name="var139_resultof_first" select="';'"/>
													<xsl:variable name="var140_resultof_substring" select="substring($var139_resultof_first, '1', (string-length($var139_resultof_first) - '1'))"/>
													<xsl:variable name="var141_resultof_string_length" select="string-length($var140_resultof_substring)"/>
													<xsl:if test="string(not((string($var141_resultof_string_length) = '0'))) != 'false'">
														<xsl:if test="string(not(($var141_resultof_string_length = '0'))) != 'false'">
															<trade_fax>
																<xsl:value-of select="$var140_resultof_substring"/>
															</trade_fax>
														</xsl:if>
													</xsl:if>
												</xsl:otherwise>
											</xsl:choose>
											<xsl:variable name="var142_result">
												<xsl:for-each select="$var133_Communication">
													<xsl:choose>
														<xsl:when test="string((string(ns0:TypeID) = 'EM')) != 'false'">
															<xsl:value-of select="'1'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:value-of select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:for-each>
											</xsl:variable>
											<xsl:choose>
												<xsl:when test="string(boolean(string($var142_result))) != 'false'">
													<xsl:for-each select="$var133_Communication[(string(ns0:TypeID) = 'EM')][not((string(string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1')))) = '0'))][not((string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))) = '0'))]">
														<trade_email>
															<xsl:value-of select="substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))"/>
														</trade_email>
													</xsl:for-each>
												</xsl:when>
												<xsl:otherwise>
													<xsl:variable name="var143_resultof_first" select="';'"/>
													<xsl:variable name="var144_resultof_substring" select="substring($var143_resultof_first, '1', (string-length($var143_resultof_first) - '1'))"/>
													<xsl:variable name="var145_resultof_string_length" select="string-length($var144_resultof_substring)"/>
													<xsl:if test="string(not((string($var145_resultof_string_length) = '0'))) != 'false'">
														<xsl:if test="string(not(($var145_resultof_string_length = '0'))) != 'false'">
															<trade_email>
																<xsl:value-of select="$var144_resultof_substring"/>
															</trade_email>
														</xsl:if>
													</xsl:if>
												</xsl:otherwise>
											</xsl:choose>
										</company>
									</xsl:for-each>
								</companys>
								<goods_infos>
									<xsl:for-each select="ns0:ConsignmentItem">
										<xsl:variable name="var146_UCR" select="ns0:UCR"/>
										<xsl:variable name="var147_ConsignmentItemPackaging" select="ns0:ConsignmentItemPackaging"/>
										<xsl:variable name="var148_Commodity" select="ns0:Commodity"/>
										<xsl:variable name="var149_GoodsMeasure" select="ns0:GoodsMeasure"/>
										<goods_info>
											<manifest_id>
												<xsl:choose>
													<xsl:when test="string((string($var12_val) = '2')) != 'false'">
														<xsl:value-of select="concat(concat($var11_resultof_cast, '_'), $var10_resultof_cast)"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="string($var6_JourneyID)"/>
													</xsl:otherwise>
												</xsl:choose>
											</manifest_id>
											<bill_no>
												<xsl:choose>
													<xsl:when test="string((string($var28_resultof_exists) != 'false')) != 'false'">
														<xsl:for-each select="$var21_AssociatedTransportDocument">
															<xsl:value-of select="string(ns0:ID)"/>
														</xsl:for-each>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="string($var29_TransportContractDocument/ns0:ID)"/>
													</xsl:otherwise>
												</xsl:choose>
											</bill_no>
											<bill_type>
												<xsl:choose>
													<xsl:when test="string((string($var28_resultof_exists) != 'false')) != 'false'">
														<xsl:value-of select="'1'"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="'0'"/>
													</xsl:otherwise>
												</xsl:choose>
											</bill_type>
											<xsl:if test="string((string($var28_resultof_exists) != 'false')) != 'false'">
												<parent_bill_no>
													<xsl:value-of select="string($var29_TransportContractDocument/ns0:ID)"/>
												</parent_bill_no>
											</xsl:if>
											<decl_traf_mode>
												<xsl:value-of select="$var13_val"/>
											</decl_traf_mode>
											<xsl:if test="string((string($var14_val) != 'false')) != 'false'">
												<i_e_flag>
													<xsl:choose>
														<xsl:when test="string((string($var7_resultof_equal) != 'false')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT1201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT2101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT2201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3102')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3202')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT4101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT4201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5102')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5202')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6102')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6202')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT7101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8102')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8103')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8104')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8202')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8203')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8204')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MTECEX')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:if test="string(($var4_resultof_cast = 'MTECIM')) != 'false'">
																<xsl:value-of select="'I'"/>
															</xsl:if>
														</xsl:otherwise>
													</xsl:choose>
												</i_e_flag>
											</xsl:if>
											<g_no>
												<xsl:value-of select="string(ns0:SequenceNumeric)"/>
											</g_no>
											<xsl:for-each select="$var147_ConsignmentItemPackaging/ns0:QuantityQuantity">
												<pack_no>
													<xsl:value-of select="string(number(string(.)))"/>
												</pack_no>
											</xsl:for-each>
											<xsl:for-each select="$var147_ConsignmentItemPackaging/ns0:TypeCode">
												<wrap_type>
													<xsl:value-of select="string(.)"/>
												</wrap_type>
											</xsl:for-each>
											<xsl:for-each select="$var147_ConsignmentItemPackaging/ns0:MarksNumbers">
												<mark_contr>
													<xsl:value-of select="string(.)"/>
												</mark_contr>
											</xsl:for-each>
											<xsl:for-each select="$var148_Commodity/ns0:UNDGCode">
												<danger_code>
													<xsl:value-of select="string(.)"/>
												</danger_code>
											</xsl:for-each>
											<xsl:for-each select="$var148_Commodity/ns0:TariffClassificationCode">
												<code_ts>
													<xsl:value-of select="string(.)"/>
												</code_ts>
											</xsl:for-each>
											<xsl:for-each select="$var148_Commodity/ns0:CargoDescription">
												<goods_memo>
													<xsl:value-of select="string(.)"/>
												</goods_memo>
											</xsl:for-each>
											<xsl:for-each select="ns0:AdditionalInformation">
												<goods_details>
													<xsl:value-of select="string(ns0:Content)"/>
												</goods_details>
											</xsl:for-each>
											<xsl:for-each select="$var149_GoodsMeasure">
												<gross_wt>
													<xsl:value-of select="string(number(string(ns0:GrossMassMeasure)))"/>
												</gross_wt>
											</xsl:for-each>
											<xsl:if test="string(boolean($var149_GoodsMeasure)) != 'false'">
												<weight_unit>KG</weight_unit>
											</xsl:if>
											<xsl:for-each select="ns0:CustomsProcedure">
												<service_code>
													<xsl:value-of select="string(ns0:CurrentCode)"/>
												</service_code>
											</xsl:for-each>
											<xsl:choose>
												<xsl:when test="string(boolean($var146_UCR)) != 'false'">
													<xsl:for-each select="$var146_UCR[not((string(string-length(substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1')))) = '0'))]">
														<ucr>
															<xsl:value-of select="substring(concat(string(ns0:ID), ';'), '1', (string-length(concat(string(ns0:ID), ';')) - '1'))"/>
														</ucr>
													</xsl:for-each>
												</xsl:when>
												<xsl:otherwise>
													<xsl:variable name="var150_resultof_first" select="';'"/>
													<xsl:variable name="var151_resultof_substring" select="substring($var150_resultof_first, '1', (string-length($var150_resultof_first) - '1'))"/>
													<xsl:if test="string(not((string(string-length($var151_resultof_substring)) = '0'))) != 'false'">
														<ucr>
															<xsl:value-of select="$var151_resultof_substring"/>
														</ucr>
													</xsl:if>
												</xsl:otherwise>
											</xsl:choose>
											<xsl:for-each select="ns0:Origin">
												<origin_country>
													<xsl:value-of select="string(ns0:OriginCountryCode)"/>
												</origin_country>
											</xsl:for-each>
										</goods_info>
									</xsl:for-each>
								</goods_infos>
								<contas>
									<xsl:for-each select="ns0:TransportEquipment">
										<xsl:variable name="var152_SealID" select="ns0:SealID"/>
										<conta>
											<manifest_id>
												<xsl:choose>
													<xsl:when test="string((string($var12_val) = '2')) != 'false'">
														<xsl:value-of select="concat(concat($var11_resultof_cast, '_'), $var10_resultof_cast)"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="string($var6_JourneyID)"/>
													</xsl:otherwise>
												</xsl:choose>
											</manifest_id>
											<bill_no>
												<xsl:choose>
													<xsl:when test="string((string($var28_resultof_exists) != 'false')) != 'false'">
														<xsl:for-each select="$var21_AssociatedTransportDocument">
															<xsl:value-of select="string(ns0:ID)"/>
														</xsl:for-each>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="string($var29_TransportContractDocument/ns0:ID)"/>
													</xsl:otherwise>
												</xsl:choose>
											</bill_no>
											<bill_type>
												<xsl:choose>
													<xsl:when test="string((string($var28_resultof_exists) != 'false')) != 'false'">
														<xsl:value-of select="'1'"/>
													</xsl:when>
													<xsl:otherwise>
														<xsl:value-of select="'0'"/>
													</xsl:otherwise>
												</xsl:choose>
											</bill_type>
											<xsl:if test="string((string($var28_resultof_exists) != 'false')) != 'false'">
												<parent_bill_no>
													<xsl:value-of select="string($var29_TransportContractDocument/ns0:ID)"/>
												</parent_bill_no>
											</xsl:if>
											<decl_traf_mode>
												<xsl:value-of select="$var13_val"/>
											</decl_traf_mode>
											<xsl:if test="string((string($var14_val) != 'false')) != 'false'">
												<i_e_flag>
													<xsl:choose>
														<xsl:when test="string((string($var7_resultof_equal) != 'false')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT1201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT2101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT2201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3102')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT3202')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT4101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT4201')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5102')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT5202')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6102')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT6202')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT7101')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8101')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8102')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8103')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8104')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8201')) != 'false'">
															<xsl:value-of select="'I'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8202')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8203')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MT8204')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:when test="string(($var4_resultof_cast = 'MTECEX')) != 'false'">
															<xsl:value-of select="'E'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:if test="string(($var4_resultof_cast = 'MTECIM')) != 'false'">
																<xsl:value-of select="'I'"/>
															</xsl:if>
														</xsl:otherwise>
													</xsl:choose>
												</i_e_flag>
											</xsl:if>
											<conta_id>
												<xsl:value-of select="string(ns0:EquipmentIdentification/ns0:ID)"/>
											</conta_id>
											<xsl:for-each select="ns0:CharacteristicCode">
												<conta_type>
													<xsl:value-of select="string(.)"/>
												</conta_type>
											</xsl:for-each>
											<xsl:for-each select="ns0:SupplierPartyTypeCode">
												<conta_sour>
													<xsl:value-of select="string(.)"/>
												</conta_sour>
											</xsl:for-each>
											<xsl:for-each select="ns0:FullnessCode">
												<empty_conta_mark>
													<xsl:value-of select="string(.)"/>
												</empty_conta_mark>
											</xsl:for-each>
											<xsl:variable name="var153_result">
												<xsl:for-each select="$var152_SealID">
													<xsl:choose>
														<xsl:when test="string(boolean(@AgencyCode)) != 'false'">
															<xsl:value-of select="'1'"/>
														</xsl:when>
														<xsl:otherwise>
															<xsl:value-of select="''"/>
														</xsl:otherwise>
													</xsl:choose>
												</xsl:for-each>
											</xsl:variable>
											<xsl:choose>
												<xsl:when test="string(boolean(string($var153_result))) != 'false'">
													<xsl:for-each select="$var152_SealID[boolean(@AgencyCode)][not((string(string-length(substring(concat(concat(concat(string(.), '/'), string(@AgencyCode)), ';'), '1', (string-length(concat(concat(concat(string(.), '/'), string(@AgencyCode)), ';')) - '1')))) = '0'))]">
														<seal_id>
															<xsl:value-of select="substring(concat(concat(concat(string(.), '/'), string(@AgencyCode)), ';'), '1', (string-length(concat(concat(concat(string(.), '/'), string(@AgencyCode)), ';')) - '1'))"/>
														</seal_id>
													</xsl:for-each>
												</xsl:when>
												<xsl:otherwise>
													<xsl:variable name="var154_resultof_first" select="';'"/>
													<xsl:variable name="var155_resultof_substring" select="substring($var154_resultof_first, '1', (string-length($var154_resultof_first) - '1'))"/>
													<xsl:if test="string(not((string(string-length($var155_resultof_substring)) = '0'))) != 'false'">
														<seal_id>
															<xsl:value-of select="$var155_resultof_substring"/>
														</seal_id>
													</xsl:if>
												</xsl:otherwise>
											</xsl:choose>
										</conta>
									</xsl:for-each>
								</contas>
							</bill>
						</xsl:for-each>
					</bills>
					<xsl:for-each select="$var1_Declaration/ns0:AdditionalInformation">
						<ChangeReasons>
							<ChangeReason>
								<MSG_ID>
									<xsl:value-of select="string($var2_Head/ns0:MessageID)"/>
								</MSG_ID>
								<MANIFEST_ID>
									<xsl:choose>
										<xsl:when test="string((string($var12_val) = '2')) != 'false'">
											<xsl:value-of select="concat(concat($var11_resultof_cast, '_'), $var10_resultof_cast)"/>
										</xsl:when>
										<xsl:otherwise>
											<xsl:value-of select="string($var6_JourneyID)"/>
										</xsl:otherwise>
									</xsl:choose>
								</MANIFEST_ID>
								<TRANSPORT_ID>
									<xsl:value-of select="$var11_resultof_cast"/>
								</TRANSPORT_ID>
								<VOYAGE_NO>
									<xsl:value-of select="$var10_resultof_cast"/>
								</VOYAGE_NO>
								<xsl:for-each select="$var1_Declaration/ns0:AdditionalInformation/ns0:Reason">
									<CHANGE_REASON>
										<xsl:value-of select="string(.)"/>
									</CHANGE_REASON>
								</xsl:for-each>
								<xsl:for-each select="$var1_Declaration/ns0:AdditionalInformation/ns0:ContactName">
									<CHANGE_PERSON>
										<xsl:value-of select="string(.)"/>
									</CHANGE_PERSON>
								</xsl:for-each>
								<xsl:for-each select="$var1_Declaration/ns0:AdditionalInformation/ns0:ContactTel">
									<CHANGE_TEL>
										<xsl:value-of select="string(.)"/>
									</CHANGE_TEL>
								</xsl:for-each>
							</ChangeReason>
						</ChangeReasons>
					</xsl:for-each>
				</content>
			</xsl:for-each>
		</Manifest>
	</xsl:template>
</xsl:stylesheet>
